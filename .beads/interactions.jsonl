{"id":"plonk-0cw","title":"Delete Resource interface and shared code","description":"Remove Resource interface, shared reconciliation abstractions, and any orphaned code after domain-specific implementations are working.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:46:14.458047-07:00","updated_at":"2025-12-22T19:01:26.932335-07:00","closed_at":"2025-12-22T19:01:26.932335-07:00","close_reason":"Resource interface deleted in plonk-5j8, docs updated to reflect new architecture","dependencies":[{"issue_id":"plonk-0cw","depends_on_id":"plonk-8al","type":"blocks","created_at":"2025-12-22T12:46:26.679433-07:00","created_by":"daemon"}]}
{"id":"plonk-1c8","title":"Simplify plonk core architecture","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T12:43:40.831371-07:00","updated_at":"2025-12-22T15:38:13.396256-07:00","closed_at":"2025-12-22T15:38:13.396256-07:00","close_reason":"Epic complete. Removed all config-driven manager code and simplified the architecture. See plonk-720 and plonk-cqk for details.","dependencies":[{"issue_id":"plonk-1c8","depends_on_id":"plonk-720","type":"blocks","created_at":"2025-12-22T15:03:25.065489-07:00","created_by":"daemon"},{"issue_id":"plonk-1c8","depends_on_id":"plonk-cqk","type":"blocks","created_at":"2025-12-22T15:03:25.1569-07:00","created_by":"daemon"}]}
{"id":"plonk-3wu","title":"Implement hardcoded cargo manager","description":"Create dedicated cargo manager. Self-installation via rustup. Handle cargo install idempotency.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:35.309352-07:00","updated_at":"2025-12-22T13:27:24.526812-07:00","closed_at":"2025-12-22T13:27:24.526812-07:00","close_reason":"Implemented CargoManager with PackageManager/PackageUpgrader interfaces, rustup self-install, and idempotent error handling.","dependencies":[{"issue_id":"plonk-3wu","depends_on_id":"plonk-yb6","type":"blocks","created_at":"2025-12-22T12:45:54.284673-07:00","created_by":"daemon"}]}
{"id":"plonk-4gj","title":"BATS tests validation and updates","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T13:41:19.90724-07:00","updated_at":"2025-12-22T14:59:43.754658-07:00","closed_at":"2025-12-22T14:59:43.754658-07:00","close_reason":"All BATS and unit tests passing after replacing config-driven managers with hardcoded registry metadata","dependencies":[{"issue_id":"plonk-4gj","depends_on_id":"plonk-tyd","type":"blocks","created_at":"2025-12-22T13:41:24.846511-07:00","created_by":"daemon"}]}
{"id":"plonk-4ll","title":"Update package manager tests","description":"Update/rewrite tests for new hardcoded manager implementations. Remove tests for deleted config-driven functionality.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:44.301736-07:00","updated_at":"2025-12-22T14:27:07.620809-07:00","closed_at":"2025-12-22T14:27:07.620809-07:00","close_reason":"Tests updated: removed pipx/conda/custom/yaml manager tests; GemManager implemented","dependencies":[{"issue_id":"plonk-4ll","depends_on_id":"plonk-tyd","type":"blocks","created_at":"2025-12-22T12:45:59.841291-07:00","created_by":"daemon"},{"issue_id":"plonk-4ll","depends_on_id":"plonk-4yh","type":"blocks","created_at":"2025-12-22T14:06:55.174187-07:00","created_by":"daemon"}]}
{"id":"plonk-4yh","title":"Add GemManager as built-in hardcoded manager","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T14:06:43.9695-07:00","updated_at":"2025-12-22T14:26:36.916987-07:00","closed_at":"2025-12-22T14:26:36.916987-07:00","close_reason":"GemManager implemented with full test coverage"}
{"id":"plonk-5j8","title":"Refactor dotfile reconciliation as standalone","description":"Extract dotfile handling from Resource interface into its own domain. Keep existing state tracking, drift detection - just remove the shared abstraction layer.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:46:14.129906-07:00","updated_at":"2025-12-22T18:47:38.443417-07:00","closed_at":"2025-12-22T18:47:38.443417-07:00","close_reason":"Closed","dependencies":[{"issue_id":"plonk-5j8","depends_on_id":"plonk-8i4","type":"blocks","created_at":"2025-12-22T12:46:26.312556-07:00","created_by":"daemon"}]}
{"id":"plonk-5ns","title":"Implement hardcoded npm-family manager","description":"Create npm manager supporting provider swapping (npm/pnpm/bun). Single config option for which provider to use. Self-installation support for each provider.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:35.150044-07:00","updated_at":"2025-12-22T13:39:09.489859-07:00","closed_at":"2025-12-22T13:39:09.489859-07:00","close_reason":"Implemented NPMManager with npm/pnpm/bun provider swapping, provider-specific commands, JSON parsing, and self-install support.","dependencies":[{"issue_id":"plonk-5ns","depends_on_id":"plonk-yb6","type":"blocks","created_at":"2025-12-22T12:45:54.193958-07:00","created_by":"daemon"}]}
{"id":"plonk-720","title":"Audit and remove all config-driven package manager references","description":"Audit the entire codebase and remove ALL references to configuration-driven package managers including: comments mentioning config-driven managers, unused ManagerConfig fields/types, GetDefaultManagers() and related dead code, documentation references to YAML manager definitions, any test assertions that config-driven managers don't exist","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T15:03:20.295203-07:00","updated_at":"2025-12-22T15:21:36.426035-07:00","closed_at":"2025-12-22T15:21:36.426035-07:00","close_reason":"Removed: managers_defaults.go, GetDefaultManagers(), merge/diff functions from managers.go and user_defined.go, managers_test.go, adding-package-managers.md. Updated: architecture.md, code-map.md, README.md, CONTRIBUTING.md, configuration.md, reconcile.go, health.go"}
{"id":"plonk-7yv","title":"User manual testing (navigate and drive)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T13:41:20.04696-07:00","updated_at":"2025-12-22T13:41:20.04696-07:00","dependencies":[{"issue_id":"plonk-7yv","depends_on_id":"plonk-4gj","type":"blocks","created_at":"2025-12-22T13:41:24.936941-07:00","created_by":"daemon"},{"issue_id":"plonk-7yv","depends_on_id":"plonk-e49","type":"blocks","created_at":"2025-12-22T16:23:42.697615-07:00","created_by":"daemon"}]}
{"id":"plonk-8al","title":"Simplify orchestrator to domain glue","description":"Reduce orchestrator to: run package reconciliation, run dotfile reconciliation, report results. Remove Resource abstraction handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:46:14.287294-07:00","updated_at":"2025-12-22T18:58:03.198902-07:00","closed_at":"2025-12-22T18:58:03.198902-07:00","close_reason":"Already simplified - orchestrator only calls domain functions directly, no Resource interface handling","dependencies":[{"issue_id":"plonk-8al","depends_on_id":"plonk-r0i","type":"blocks","created_at":"2025-12-22T12:46:26.452117-07:00","created_by":"daemon"},{"issue_id":"plonk-8al","depends_on_id":"plonk-5j8","type":"blocks","created_at":"2025-12-22T12:46:26.543134-07:00","created_by":"daemon"}]}
{"id":"plonk-8i4","title":"Audit Resource interface and reconciliation engine","description":"Map current Resource interface, shared reconciliation code, orchestrator complexity. Identify what packages vs dotfiles actually need differently.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:46:13.813773-07:00","updated_at":"2025-12-22T16:30:39.856711-07:00","closed_at":"2025-12-22T16:30:39.856711-07:00","close_reason":"Audit complete. Resource interface unused by orchestrator. Recommendations documented for removal.","dependencies":[{"issue_id":"plonk-8i4","depends_on_id":"plonk-ard","type":"blocks","created_at":"2025-12-22T12:46:26.089549-07:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"plonk-8i4","author":"rdh","text":"## Audit Findings\n\n### 1. Resource Interface (Unused by Orchestrator)\nImplementers: PackageResource, MultiPackageResource, DotfileResource\nKey finding: The orchestrator doesn't use this interface - calls packages.Apply() and dotfiles.Apply() directly.\n\n### 2. Shared Item Type (Over-generalized)\n- Kitchen-sink design - packages don't need Path, dotfiles don't need Manager\n- Metadata used as catch-all (version, source, destination, drift_comparator)\n- Domain field is redundant\n\n### 3. Shared Reconciliation (Partially Useful)\n- ReconcileItems() - dotfiles (name key)\n- ReconcileItemsWithKey() - packages (manager:name key)\n- ReconcileResource() - dotfiles only\n- GroupItemsByState() - useful for both\n- Drift detection runs for packages too (wasted cycles)\n\n### 4. Orchestrator (Already Thin)\nAlready bypasses Resource abstraction. Just needs cleanup.\n\n### 5. Recommendations\n1. Delete Resource interface - not used by orchestrator\n2. Delete PackageResource/DotfileResource adapters - dead code\n3. Keep shared ItemState enum, create domain-specific types\n4. Move reconciliation to domains\n5. Simplify orchestrator - remove unused lock field","created_at":"2025-12-22T23:30:13Z"}]}
{"id":"plonk-adu","title":"Implement hardcoded go manager","description":"Create dedicated go manager for 'go install' packages. Self-installation strategy TBD (brew? official installer?).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:35.476804-07:00","updated_at":"2025-12-22T13:31:01.17031-07:00","closed_at":"2025-12-22T13:31:01.17031-07:00","close_reason":"Implemented GoManager with GOBIN scanning for list, binary removal for uninstall, and brew-based self-install.","dependencies":[{"issue_id":"plonk-adu","depends_on_id":"plonk-yb6","type":"blocks","created_at":"2025-12-22T12:45:54.376621-07:00","created_by":"daemon"}]}
{"id":"plonk-ard","title":"Remove config-driven package managers","description":"Kill GenericManager and YAML-based manager configuration. Hardcode support for: brew, npm-family (with provider swapping for pnpm/bun), cargo, go, uv. Restore self-installation support with ability to configure bootstrap method per manager.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T12:43:57.022259-07:00","updated_at":"2025-12-22T16:18:34.137122-07:00","closed_at":"2025-12-22T16:18:34.137122-07:00","close_reason":"All hardcoded managers implemented with SelfInstall support. AGENTS.md updated to reflect new architecture.","dependencies":[{"issue_id":"plonk-ard","depends_on_id":"plonk-4ll","type":"blocks","created_at":"2025-12-22T12:45:59.990859-07:00","created_by":"daemon"}]}
{"id":"plonk-cqk","title":"Identify simplification refactors after config-driven manager removal","description":"Audit the codebase for simplification opportunities now that config-driven package managers are removed: Config struct fields that are no longer needed (Managers field), merge functions that are no longer used, validator logic that can be simplified, types like ManagerConfig/ListConfig/CommandConfig that may be removable, any abstraction layers that existed only to support config-driven managers","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T15:03:20.44769-07:00","updated_at":"2025-12-22T15:37:04.391918-07:00","closed_at":"2025-12-22T15:37:04.391918-07:00","close_reason":"Removed: Config.Managers field, ManagerConfig/ListConfig/CommandConfig types (managers.go), listconfig validator, GetNonDefaultManagers(), diff functions from user_defined.go. Simplified: config_formatter.go, config_edit.go, health.go. Updated tests to not use config-driven managers."}
{"id":"plonk-e49","title":"Remove shared Resource abstraction","description":"Kill the unified Resource interface and shared reconciliation engine. Implement domain-specific reconciliation: packages get simple list-based reconciliation, dotfiles keep their own state tracking. Orchestrator becomes trivial glue between the two domains.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-22T12:44:00.791249-07:00","updated_at":"2025-12-22T16:25:23.406252-07:00","dependencies":[{"issue_id":"plonk-e49","depends_on_id":"plonk-ard","type":"blocks","created_at":"2025-12-22T12:44:15.050363-07:00","created_by":"daemon"},{"issue_id":"plonk-e49","depends_on_id":"plonk-i2j","type":"blocks","created_at":"2025-12-22T12:46:26.860332-07:00","created_by":"daemon"}]}
{"id":"plonk-i2j","title":"Update reconciliation tests","description":"Update tests for new domain-specific reconciliation. Remove tests for deleted Resource abstraction.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T12:46:14.644771-07:00","updated_at":"2025-12-22T12:46:14.644771-07:00","dependencies":[{"issue_id":"plonk-i2j","depends_on_id":"plonk-0cw","type":"blocks","created_at":"2025-12-22T12:46:26.769426-07:00","created_by":"daemon"}]}
{"id":"plonk-orj","title":"Implement hardcoded uv manager","description":"Create dedicated uv manager. Self-installation via brew or official script. Handle uv tool install semantics.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:35.647589-07:00","updated_at":"2025-12-22T13:33:53.062002-07:00","closed_at":"2025-12-22T13:33:53.062002-07:00","close_reason":"Implemented UVManager with uv tool commands, upgrade-all support, and brew/script self-install.","dependencies":[{"issue_id":"plonk-orj","depends_on_id":"plonk-yb6","type":"blocks","created_at":"2025-12-22T12:45:54.468602-07:00","created_by":"daemon"}]}
{"id":"plonk-r0i","title":"Implement simple package reconciliation","description":"Replace Resource-based package handling with simple list-based reconciliation: diff lock file specs against installed packages, install/remove as needed. No shared abstractions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:46:13.974179-07:00","updated_at":"2025-12-22T17:16:45.457282-07:00","closed_at":"2025-12-22T17:16:45.457282-07:00","close_reason":"Implemented simple list-based package reconciliation. Added PackageSpec.Key(), Reconcile(), ReconcileFromLock(), GetDesiredFromLock(), GetActualInstalled(). Updated Apply to use new reconciliation. Deleted unused resource.go (PackageResource/MultiPackageResource).","dependencies":[{"issue_id":"plonk-r0i","depends_on_id":"plonk-8i4","type":"blocks","created_at":"2025-12-22T12:46:26.221297-07:00","created_by":"daemon"}]}
{"id":"plonk-tyd","title":"Remove GenericManager and YAML config code","description":"Delete GenericManager, manager config loading, YAML manager definitions, ManagerRegistry complexity. Clean removal after hardcoded managers are working.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:44.164879-07:00","updated_at":"2025-12-22T13:58:24.62744-07:00","closed_at":"2025-12-22T13:58:24.62744-07:00","close_reason":"Removed GenericManager, YAML config loading, and metadata extractors. Updated registry to use hardcoded switch, simplified helpers with hardcoded install hints, and fixed all tests.","dependencies":[{"issue_id":"plonk-tyd","depends_on_id":"plonk-vsn","type":"blocks","created_at":"2025-12-22T12:45:56.403619-07:00","created_by":"daemon"},{"issue_id":"plonk-tyd","depends_on_id":"plonk-5ns","type":"blocks","created_at":"2025-12-22T12:45:56.499788-07:00","created_by":"daemon"},{"issue_id":"plonk-tyd","depends_on_id":"plonk-3wu","type":"blocks","created_at":"2025-12-22T12:45:56.591826-07:00","created_by":"daemon"},{"issue_id":"plonk-tyd","depends_on_id":"plonk-adu","type":"blocks","created_at":"2025-12-22T12:45:56.682232-07:00","created_by":"daemon"},{"issue_id":"plonk-tyd","depends_on_id":"plonk-orj","type":"blocks","created_at":"2025-12-22T12:45:56.77217-07:00","created_by":"daemon"}]}
{"id":"plonk-vsn","title":"Implement hardcoded brew manager","description":"Create dedicated brew manager with: install/uninstall/list commands, self-installation via official script, idempotent error handling. No YAML config.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:34.987014-07:00","updated_at":"2025-12-22T13:15:41.188035-07:00","closed_at":"2025-12-22T13:15:41.188035-07:00","close_reason":"Implemented BrewManager with all PackageManager and PackageUpgrader methods, idempotent error handling, and self-installation support. Added comprehensive tests.","dependencies":[{"issue_id":"plonk-vsn","depends_on_id":"plonk-yb6","type":"blocks","created_at":"2025-12-22T12:45:54.096827-07:00","created_by":"daemon"}]}
{"id":"plonk-yb6","title":"Audit current GenericManager and config-driven manager code","description":"## Audit: GenericManager and Config-Driven Manager Code\n\n### Files to Delete/Replace\n\n**Core Implementation (DELETE)**\n- `internal/resources/packages/generic.go` (386 lines) - GenericManager implementation\n- `internal/resources/packages/generic_test.go` (680 lines) - tests\n\n**Config Types (SIMPLIFY)**\n- `internal/config/managers.go` (182 lines) - ManagerConfig, ListConfig, CommandConfig, etc.\n- `internal/config/managers_defaults.go` (245 lines) - GetDefaultManagers() with 8 manager configs\n- `internal/config/user_defined.go` (291 lines) - diff/merge logic for user overrides\n\n**Registry (SIMPLIFY)**  \n- `internal/resources/packages/registry.go` (107 lines) - v2Managers map, LoadV2Configs\n\n### Current Default Managers (in managers_defaults.go)\n- pipx ❌ REMOVE\n- cargo ✅ KEEP  \n- gem ❌ REMOVE\n- brew ✅ KEEP\n- npm ✅ KEEP (with provider swapping)\n- pnpm ✅ KEEP (as npm provider)\n- conda ❌ REMOVE\n- uv ✅ KEEP\n\n### Missing Manager\n- go ⚠️ ADD NEW - not currently implemented\n\n### Impact Radius (files using GenericManager/ManagerRegistry)\nCommands: install.go, uninstall.go, upgrade.go\nClone: setup.go\nDiagnostics: health.go\nResources: operations.go, spec.go, resource.go, init.go\n~15 test files\n\n### Tests to Update (~1563 lines total)\n- generic_test.go (680 lines) - DELETE entirely\n- registry_test.go (48 lines) - heavy refactor\n- registry_v2_test.go (146 lines) - DELETE entirely  \n- managers_test.go (201 lines) - simplify\n- user_defined_test.go (317 lines) - DELETE entirely\n- validators_test.go (171 lines) - simplify (remove listconfig validator)\n\n### Key Decisions for Implementation\n1. Create dedicated manager files: brew.go, npm.go, cargo.go, go.go, uv.go\n2. Each implements PackageManager interface directly\n3. npm.go handles provider swapping (npm/pnpm/bun)\n4. Remove all YAML config parsing for managers\n5. Registry becomes simple name→manager lookup\n6. Self-installation support per manager","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:45:34.828651-07:00","updated_at":"2025-12-22T12:50:20.2044-07:00","closed_at":"2025-12-22T12:50:20.2044-07:00","close_reason":"Audit complete. Documented all files to delete/modify, impact radius, and implementation decisions."}
